# משחק שחמט - ארכיטקטורת שרת-לקוח

## סקירה כללית

המשחק הומר מגרסה מקומית לארכיטקטורת שרת-לקוח תוך שמירה על כל הפונקציונליות המקורית:

- **השרת** (`Server.py`) - משתמש במחלקת `Game` המקורית עם כל הלוגיקה, פיזיקה, אנימציות ומעקב נתונים
- **הלקוח** (`Client.py`) - מציג את הלוח עם אנימציות מלאות, קולט קלט ושולח לשרת

## הפעלת המשחק

### שלב 1: הפעלת השרת
```bash
python run_server.py
```

השרת יתחיל לרוץ על `localhost:8888` ויחכה ללקוחות.

### שלב 2: הפעלת הלקוח (או לקוחות)
```bash
python run_client.py
```

ניתן להפעיל מספר לקוחות במקביל (עד 2 שחקנים).

## בקרות המשחק

### שחקן 1 (כלים לבנים):
- **מקשי מספרים**: 8,2,4,6 - תנועת הסמן
- **מקשים**: 5,0,Enter - בחירת כלי/מהלך

### שחקן 2 (כלים שחורים):
- **WASD**: תנועת הסמן
- **רווח**: בחירת כלי/מהלך

### כלליים:
- **ESC/Q**: יציאה מהמשחק

## תכונות השרת

### שימוש במחלקת Game המקורית
- כל הלוגיקה המקורית נשמרת
- פיזיקה מלאה של כלים
- מערכת State Pattern
- אנימציות וגרפיקה (ללא תצוגה)

### ניהול המשחק
- בדיקת חוקיות מהלכים מלאה
- טיפול בתפיסת כלים עם צלילים
- קידום חיילים למלכות
- זיהוי ניצחון עם הודעות
- מעקב ניקוד ומהלכים
- Observer Pattern למעקב אירועים
- **הפרדת שחקנים**: player_1 מזיז לבן, player_2 מזיז שחור

## תכונות הלקוח

### תצוגה גרפית מלאה
- אנימציות מלאות של כלים (idle, move, jump, rest)
- סמנים צבעוניים לשני השחקנים
- הדגשת כלים נבחרים
- הצגת ניקוד ומהלכים בזמן אמת
- הודעות ניצחון עם תמונות
- רקע גרדיאנט עם מידע נוסף
- **משחק מלא בלקוח**: כל כלי מבצע אנימציות מלאות

### אינטראקציה
- קליטת קלט מקלדת מלאה
- שליחת קלט ישירות לשרת
- סנכרון מיקומים עם השרת
- השמעת צלילים (move, fail, win, keel)
- **אנימציות אוטומטיות**: move → rest → idle

## פרוטוקול התקשורת

### הודעות מהלקוח לשרת:
```json
{
    "type": "keyboard_input",
    "key": 119
}
```

```json
{
    "type": "cursor_move",
    "cursor_pos": [4, 4]
}
```

```json
{
    "type": "piece_select"
}
```

### הודעות מהשרת ללקוח:
```json
{
    "type": "game_state",
    "data": {
        "pieces": [...],
        "cursors": {"player1": [0, 7], "player2": [0, 0]},
        "selected": {"player1": [2, 6], "player2": null},
        "score": {"white": 0, "black": 2},
        "moves": {"white": [...], "black": [...]},
        "game_over": false,
        "winner": null,
        "player_names": {"player1": "PLAYER 1", "player2": "PLAYER 2"}
    }
}
```

```json
{
    "type": "error",
    "message": "מהלך לא חוקי"
}
```

## קבצים עיקריים

- `Server.py` - השרת הראשי
- `Client.py` - הלקוח הראשי  
- `run_server.py` - הפעלת השרת
- `run_client.py` - הפעלת הלקוח
- `Game.py` - המשחק המקורי (לא בשימוש יותר)
- `main.py` - הפעלה מקומית (לא בשימוש יותר)

## הערות טכניות

- **השרת**: מריץ Game מלא, בודק חוקיות, שולח רק מיקומים
- **הלקוח**: מריץ Game מלא, מסנכרן מיקומים, מבצע אנימציות
- **הפרדת תפקידים**: שרת = לוגיקה, לקוח = גרפיקה
- **שני שחקנים**: כל לקוח שולט על צבע אחד
- **אנימציות מלאות**: כל מעבר מצב מתבצע בלקוח

## פתרון בעיות

### השרת לא מתחיל:
- ודא שהפורט 8888 פנוי
- בדוק שאין תהליכי Python אחרים רצים

### הלקוח לא מתחבר:
- ודא שהשרת רץ לפני הפעלת הלקוח
- בדוק את כתובת השרת (localhost:8888)

### בעיות גרפיות:
- ודא שקובץ board.png קיים
- בדוק שתיקיית pieces מכילה את כל התמונות והאנימציות
- ודא שקבצי config.json קיימים בכל תיקיית מצב
- בדוק שקובץ Names.json קיים לשמות שחקנים